{% extends 'base.html' %}
{% block title %}{{ category.replace('_', ' ').title() }} Gallery{% endblock %}
{% block content %}
    <br><br><br>
<div class="container my-5">
    <h1>{{ category.replace('_', ' ').title() }} Gallery</h1>

    <div class="projects-gallery">
        {% for image in images %}
            <img src="{{ url_for('static', filename='images/' + image.category + '/' + image.filename) }}"
                 alt="{{ category.replace('_', ' ').title() }}"
                 loading="lazy"
                 data-bs-toggle="modal"
                 data-bs-target="#imageModal"
                 data-img-src="{{ url_for('static', filename='images/' + image.category + '/' + image.filename) }}"
                 class="gallery-img">
        {% else %}
            <p>No images available in this category.</p>
        {% endfor %}
    </div>
</div>

<!-- Modal for enlarged image view -->
<div class="modal fade" id="imageModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl">
        <div class="modal-content bg-black border-0 position-relative">
            <button type="button" class="btn-close position-absolute top-0 end-0 m-3"
                    data-bs-dismiss="modal" aria-label="Close"
                    style="z-index:1050; filter: invert(25%) sepia(95%) saturate(7500%) hue-rotate(-5deg) brightness(95%) contrast(105%);"></button>
            <div class="modal-body p-0 text-center">
                <img id="modalImage" src="" style="max-width:100%; max-height:90vh; object-fit:contain;">
            </div>
        </div>
    </div>
</div>

<style>
.projects-gallery {
    column-count: 3;
    column-gap: 15px;
}

.gallery-img {
    width: 100%;
    max-height: 300px;
    object-fit: cover;
    margin-bottom: 15px;
    border-radius: 5px;
    display: block;
    cursor: pointer;
    transition: transform 0.2s ease-in-out;
}

.gallery-img:hover {
    transform: scale(1.05);
}

@media (max-width: 768px) {
    .projects-gallery {
        column-count: 2;
    }
}

@media (max-width: 576px) {
    .projects-gallery {
        column-count: 1;
    }
}
</style>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const modalImage = document.getElementById("modalImage");
    document.querySelectorAll(".projects-gallery img").forEach(img => {
        img.addEventListener("click", function () {
            modalImage.src = img.dataset.imgSrc;
        });
    });
});
</script>
{% endblock %}