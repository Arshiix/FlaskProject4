{% extends 'base.html' %}
{% block title %}Contact Adora Construction - Uxbridge Home Renovation{% endblock %}
{% block meta_description %}Contact Adora Construction Ltd in Uxbridge for expert home renovation, plumbing, electrical, and carpentry services across West London. Get a free quote today.{% endblock %}
{% block meta_keywords %}contact Adora Construction, home renovation, Uxbridge, West London, plumbing, electrical, carpentry, free quote{% endblock %}
{% block canonical_url %}{{ url_for('contact', _external=True) }}{% endblock %}
{% block og_tags %}
    <meta property="og:title" content="Contact Adora Construction - Uxbridge Home Renovation">
    <meta property="og:description" content="Contact Adora Construction Ltd in Uxbridge for expert home renovation, plumbing, electrical, and carpentry services across West London. Get a free quote today.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ url_for('contact', _external=True) }}">
    <meta property="og:image" content="{{ url_for('static', filename='images/hero.png', _external=True) }}">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Contact Adora Construction - Uxbridge Home Renovation">
    <meta name="twitter:description" content="Contact Adora Construction Ltd in Uxbridge for expert home renovation, plumbing, electrical, and carpentry services across West London.">
    <meta name="twitter:image" content="{{ url_for('static', filename='images/hero.png', _external=True) }}">
{% endblock %}
{% block structured_data %}
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "LocalBusiness",
        "name": "Adora Construction Ltd",
        "address": {
            "@type": "PostalAddress",
            "streetAddress": "345 Harlington Rd",
            "addressLocality": "Uxbridge",
            "addressRegion": "London",
            "postalCode": "UB8 3JD",
            "addressCountry": "UK"
        },
        "telephone": "+447477659370",
        "email": "adora.constructionltd@gmail.com",
        "url": "{{ url_for('contact', _external=True) }}",
        "image": "{{ url_for('static', filename='images/hero.png', _external=True) }}",
        "description": "Contact Adora Construction Ltd in Uxbridge for expert home renovation, plumbing, electrical, and carpentry services across West London.",
        "areaServed": [
            "Uxbridge", "Pinner", "Ruislip", "Ickenham", "Ealing", "Acton", "Richmond", "Chiswick",
            "Kensington", "Chelsea", "Hayes", "West Drayton", "Hillingdon", "Denham", "Iver",
            "Northwood", "Eastcote", "Harrow", "Northolt", "Greenford", "Southall", "Hanwell",
            "Perivale", "Wembley", "Brentford", "Twickenham", "Hounslow", "Isleworth", "Hammersmith",
            "Fulham", "Notting Hill", "Shepherd's Bush"
        ],
        "openingHours": "Mo-Fr 08:00-18:00",
        "contactPoint": {
            "@type": "ContactPoint",
            "telephone": "+447477659370",
            "email": "adora.constructionltd@gmail.com",
            "contactType": "Customer Service",
            "areaServed": ["UK"],
            "availableLanguage": ["English"]
        }
    }
    </script>
{% endblock %}
{% block content %}
<div class="container my-5">
    <br><br><br><br>
    <h1>Contact Us</h1>
    <p class="lead mb-4">Get in touch with Adora Construction Ltd for expert <a href="/services" class="text-primary">home renovation and repair services</a> in <a href="/areas" class="text-primary">Uxbridge, Pinner, Ruislip, and West London</a>. Fill out the form below or call us at <a href="tel:+447477659370" class="text-primary">+44 7477 659370</a>.</p>

    {% if service %}
        <h4 class="mb-3">Service: {{ service.name }}</h4>
    {% endif %}

    <form method="POST" enctype="multipart/form-data">
        <!-- Name -->
        <div class="mb-3">
            <label for="name" class="form-label">Name</label>
            <input type="text" class="form-control" id="name" name="name" required>
        </div>

        <!-- Email -->
        <div class="mb-3">
            <label for="email" class="form-label">Email</label>
            <input type="email" class="form-control" id="email" name="email" required>
        </div>

        <!-- Message -->
        <div class="mb-3">
            <label for="message" class="form-label">Message</label>
            <textarea class="form-control" id="message" name="message" rows="5" required></textarea>
        </div>

        <!-- Hidden Input for Selected Images -->
        <input type="hidden" name="selected_gallery_images" id="selected_gallery_images_input">

        <!-- Gallery Navigation Links -->
        <div class="mb-3">
            <p class="mb-1"><strong>Browse Gallery by Category:</strong></p>
            {% for category, images in all_gallery_data.items() %}
                <a href="#cat-{{ category }}" class="btn btn-outline-primary btn-sm mb-1 me-1">{{ category.replace('_', ' ').title() }}</a>
            {% endfor %}
        </div>

        <!-- Upload Your Own Images & Submit Button -->
        <div class="mb-4">
            <label for="upload_images" class="form-label">Upload Your Own Images (optional)</label>
            <input type="file" class="form-control mb-3" id="upload_images" name="uploaded_images" accept="image/*" multiple>

            <div class="text-center">
                <button type="submit" class="btn btn-success btn-lg">Send Message</button>
            </div>
        </div>

        <!-- Gallery Selection by Category -->
        <div class="mb-4">
            {% for category, images in all_gallery_data.items() %}
                <h5 id="cat-{{ category }}" class="mt-3">{{ category.replace('_', ' ').title() }}</h5>
                <p class="mb-2">Click images to select them (optional).</p>
                <div class="d-flex flex-wrap gap-2">
                    {% for img in images %}
                        <label class="gallery-item" style="cursor:pointer; flex:0 0 calc(16.66% - 0.5rem);">
                            <input type="checkbox" name="gallery_image" value="{{ img.filename }}" class="gallery-checkbox d-none">
                            <img src="{{ url_for('static', filename='images/' + img.category + '/' + img.filename) }}"
                                 alt="{{ category.replace('_', ' ').title() }} in Uxbridge"
                                 class="img-fluid border rounded selection-image">
                        </label>
                    {% endfor %}
                </div>
            {% endfor %}
        </div>
    </form>
</div>

<!-- CSS for selected gallery images -->
<style>
.selection-image {
    transition: 0.2s;
    width: 100%;
    height: 150px;
    object-fit: cover;
    border-radius: 8px;
}

input[type="checkbox"]:checked + .selection-image {
    border: 3px solid #0d6efd;
    transform: scale(0.95);
}

.gallery-item {
    margin-bottom: 0.5rem;
    overflow: hidden;
}
</style>

<!-- JavaScript for handling multiple image selections -->
<script>
document.addEventListener('DOMContentLoaded', () => {
    const checkboxes = document.querySelectorAll('.gallery-checkbox');
    const hiddenInput = document.getElementById('selected_gallery_images_input');
    let selectedImages = [];

    checkboxes.forEach(checkbox => {
        const img = checkbox.nextElementSibling;
        img.addEventListener('click', () => {
            checkbox.checked = !checkbox.checked;
            const filename = checkbox.value;
            if (checkbox.checked) {
                if (!selectedImages.includes(filename)) {
                    selectedImages.push(filename);
                }
            } else {
                selectedImages = selectedImages.filter(f => f !== filename);
            }
            hiddenInput.value = selectedImages.join(',');
            img.classList.toggle('border-primary', checkbox.checked);
            console.log('Current selected images:', selectedImages);
        });
    });

    const form = document.querySelector('form');
    form.addEventListener('submit', () => {
        hiddenInput.value = selectedImages.join(',');
        console.log('Submitting selected images:', hiddenInput.value);
    });
});
</script>
{% endblock %}