{% extends 'base.html' %}
{% block title %}Projects{% endblock %}
{% block content %}
<div class="container my-5">
    <h1>Our Projects</h1>

    {% for cat, images in gallery_data.items() %}
        <h2 class="mt-5">{{ cat.replace('_', ' ').title() }}</h2>
        <div class="projects-gallery">
            {% for image in images %}
                <img src="{{ url_for('static', filename='images/' + image.category + '/' + image.filename) }}"
                     alt="{{ cat.replace('_', ' ').title() }}"
                     loading="lazy"
                     data-bs-toggle="modal"
                     data-bs-target="#imageModal"
                     data-img-src="{{ url_for('static', filename='images/' + image.category + '/' + image.filename) }}">
            {% endfor %}
        </div>
    {% endfor %}
</div>

<!-- Modal for full-size image -->
<div class="modal fade" id="imageModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-xl">
    <div class="modal-content bg-black border-0 position-relative">

      <button type="button" class="btn-close position-absolute top-0 end-0 m-3"
              data-bs-dismiss="modal" aria-label="Close"
              style="z-index:1050; filter: invert(25%) sepia(95%) saturate(7500%) hue-rotate(-5deg) brightness(95%) contrast(105%);">
      </button>

      <div class="modal-body p-0 text-center">
        <img id="modalImage" src="" style="max-width:100%; max-height:90vh; object-fit:contain;">
      </div>
    </div>
  </div>
</div>

<!-- CSS -->
<style>
.projects-gallery {
    column-count: 3; /* number of columns */
    column-gap: 15px;
}

.projects-gallery img {
    width: 100%;
    margin-bottom: 15px;
    border-radius: 5px;
    display: block;
    cursor: pointer;
}

</style>

<!-- JS for modal -->
<script>
document.addEventListener("DOMContentLoaded", function () {
    const modalImage = document.getElementById("modalImage");

    document.querySelectorAll(".projects-gallery img").forEach(img => {
        img.addEventListener("click", function () {
            modalImage.src = img.dataset.imgSrc;
        });
    });
});
</script>
{% endblock %}
